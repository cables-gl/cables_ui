function Timer(){function t(){return s=(Date.now()-r)/1e3,s+i}var e=this,r=Date.now(),i=0,n=0,s=0,a=!0;this.update=function(){return a?void 0:n=t()},this.getTime=function(){return n},this.togglePlay=function(){a?e.play():e.pause()},this.setOffset=function(t){0>n+t?(r=Date.now(),i=0,n=0):(i+=t,n=s+i)},this.play=function(){r=Date.now(),a=!1},this.pause=function(){i=n,a=!0}}function generateUUID(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)});return e}function ajaxRequest(t,e){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(t){e(t.target.response)},r.send()}var CGL=CGL||{};CGL.Mesh=function(t){var e=-1,r=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,r),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(t.vertices),gl.STATIC_DRAW),r.itemSize=3,r.numItems=t.vertices.length/3;var i=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,i),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.verticesIndices),gl.STATIC_DRAW),i.itemSize=1,i.numItems=t.verticesIndices.length,t.texCoords.length>0&&(e=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,e),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(t.texCoords),gl.STATIC_DRAW),e.itemSize=2,e.numItems=t.texCoords.length/e.itemSize),this.render=function(t){t.bind(),GL.enableVertexAttribArray(t.getAttrVertexPos()),-1!=e&&GL.enableVertexAttribArray(t.getAttrTexCoords()),gl.bindBuffer(gl.ARRAY_BUFFER,r),gl.vertexAttribPointer(t.getAttrVertexPos(),r.itemSize,gl.FLOAT,!1,0,0),-1!=e&&(gl.bindBuffer(gl.ARRAY_BUFFER,e),gl.vertexAttribPointer(t.getAttrTexCoords(),e.itemSize,gl.FLOAT,!1,0,0)),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,i),gl.drawElements(gl.TRIANGLES,i.numItems,gl.UNSIGNED_SHORT,0)}},CGL.Geometry=function(){this.faceVertCount=3,this.vertices=[],this.verticesIndices=[],this.texCoords=[],this.texCoordsIndices=[]},parseOBJ=function(t){_readline=function(t,e){for(var r="";10!=t[e];)r+=String.fromCharCode(t[e++]);return r};var e=new CGL.Geometry;e.groups={},e.c_norms=[],e.i_norms=[];for(var r={from:0,to:0},i=0,n=new Uint8Array(t);i<n.length;){var s=_readline(n,i);i+=s.length+1,s=s.replace(/ +(?= )/g,""),s=s.replace(/(^\s+|\s+$)/g,"");var a=s.split(" ");if("g"==a[0]&&(r.to=e.verticesIndices.length,null==e.groups[a[1]]&&(e.groups[a[1]]={from:e.verticesIndices.length,to:0}),r=e.groups[a[1]]),"v"==a[0]){var o=parseFloat(a[1]),h=parseFloat(a[2]),l=parseFloat(a[3]);e.vertices.push(o,h,l)}if("vt"==a[0]){var o=parseFloat(a[1]),h=1-parseFloat(a[2]);e.texCoords.push(o,h)}if("vn"==a[0]){var o=parseFloat(a[1]),h=parseFloat(a[2]),l=parseFloat(a[3]);e.c_norms.push(o,h,l)}if("f"==a[0]){var u=a[1].split("/"),d=a[2].split("/"),p=a[3].split("/"),g=parseInt(u[0])-1,c=parseInt(d[0])-1,m=parseInt(p[0])-1,P=parseInt(u[1])-1,v=parseInt(d[1])-1,O=parseInt(p[1])-1,f=parseInt(u[2])-1,T=parseInt(d[2])-1,_=parseInt(p[2])-1,x=e.vertices.length/3,I=e.texCoords.length/2,w=e.c_norms.length/3;if(0>g&&(g=x+g+1),0>c&&(c=x+c+1),0>m&&(m=x+m+1),0>P&&(P=I+P+1),0>v&&(v=I+v+1),0>O&&(O=I+O+1),0>f&&(f=w+f+1),0>T&&(T=w+T+1),0>_&&(_=w+_+1),e.verticesIndices.push(g,c,m),e.texCoordsIndices.push(P,v,O),e.i_norms.push(f,T,_),5==a.length){var C=a[4].split("/"),b=parseInt(C[0])-1,R=parseInt(C[1])-1,E=parseInt(C[2])-1;0>b&&(b=x+b+1),0>R&&(R=I+R+1),0>E&&(E=w+E+1),e.verticesIndices.push(g,m,b),e.texCoordsIndices.push(P,O,R),e.i_norms.push(f,_,E)}}}return r.to=e.verticesIndices.length,e};var CGL=CGL||{};CGL.Uniform=function(t,e,r,i){var n=this,s=-1,a=r,o=e,h=0,l=t;this.needsUpdate=!0,l.addUniform(this),this.getType=function(){return o},this.getName=function(){return a},this.resetLoc=function(){s=-1},this.updateValueF=function(){-1==s&&(s=gl.getUniformLocation(l.getProgram(),a)),gl.uniform1f(s,h)},this.setValueF=function(t){n.needsUpdate=!0,h=t},this.updateValueT=function(){-1==s&&(s=gl.getUniformLocation(l.getProgram(),a),-1==s&&console.log("texture loc unknown!!")),gl.uniform1i(s,0)},this.setValueT=function(t){n.needsUpdate=!0,h=t},"f"==o&&(this.setValue=this.setValueF,this.updateValue=this.updateValueF),"t"==o&&(this.setValue=this.setValueT,this.updateValue=this.updateValueT),this.setValue(i)},CGL.Shader=function(){var t=this,e=!1,r=[],i=!0;this.removeUniform=function(t){console.log("before: "+r.length);for(var e in r)if(r[e].getName()==t){r.splice(e,1);break}i=!0,console.log(r.length)},this.addUniform=function(t){r.push(t),i=!0},this.getDefaultVertexShader=function(){return"attribute vec3 vPosition;\nattribute vec2 attrTexCoord;\nvarying vec2 texCoord;\nuniform mat4 projMatrix;\nuniform mat4 mvMatrix;\nvoid main()\n{\n   texCoord=attrTexCoord;\n   gl_Position = projMatrix * mvMatrix * vec4(vPosition,  1.0);\n}\n"},this.getDefaultFragmentShader=function(){return"precision mediump float;\nvoid main()\n{\n   gl_FragColor = vec4(0.5,0.5,0.5,1.0);\n}\n"},this.srcVert=this.getDefaultVertexShader(),this.srcFrag=this.getDefaultFragmentShader(),this.setSource=function(t,e){this.srcVert=t,this.srcFrag=e};var n=-1,s=-1,a=-1,o=-1;this.getAttrTexCoords=function(){return a},this.getAttrVertexPos=function(){return o},this.hasTextureUniforms=function(){for(var t in r)if("t"==r[t].getType())return!0;return!1},this.compile=function(){var n="";t.hasTextureUniforms()&&(n+="#define HAS_TEXTURES".endl()),console.log("shader compile..."),console.log("has textures: "+t.hasTextureUniforms());var a=n+t.srcVert,o=n+t.srcFrag;if(e){console.log("recompile shaders..."),t.vshader=createShader(a,gl.VERTEX_SHADER,t.vshader),t.fshader=createShader(o,gl.VERTEX_SHADER,t.fshader),linkProgram(e),s=-1;for(var h in r)r[h].resetLoc()}else console.log("create shaderprogram"),e=createProgram(a,o,e);i=!1},this.bind=function(){(!e||i)&&t.compile(),-1==s&&(a=gl.getAttribLocation(e,"attrTexCoord"),o=gl.getAttribLocation(e,"vPosition"),n=gl.getUniformLocation(e,"projMatrix"),s=gl.getUniformLocation(e,"mvMatrix")),GL.useProgram(e);for(var h in r)r[h].needsUpdate&&r[h].updateValue();gl.uniformMatrix4fv(n,!1,pMatrix),gl.uniformMatrix4fv(s,!1,mvMatrix)},this.getProgram=function(){return e},createShader=function(t,e,r){var i=r||gl.createShader(e);if(gl.shaderSource(i,t),gl.compileShader(i),!gl.getShaderParameter(i,gl.COMPILE_STATUS))throw console.log("compile status: "),e==gl.VERTEX_SHADER&&console.log("VERTEX_SHADER"),e==gl.FRAGMENT_SHADER&&console.log("FRAGMENT_SHADER"),gl.getShaderInfoLog(i);return i},linkProgram=function(t){if(gl.linkProgram(t),!gl.getProgramParameter(t,gl.LINK_STATUS))throw gl.getProgramInfoLog(t)},createProgram=function(e,r){var i=gl.createProgram();return t.vshader=createShader(e,gl.VERTEX_SHADER),t.fshader=createShader(r,gl.FRAGMENT_SHADER),gl.attachShader(i,t.vshader),gl.attachShader(i,t.fshader),linkProgram(i),i}};var CGL=CGL||{};CGL.Texture=function(){var t=this;this.tex=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,this.tex),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,1,1,0,gl.RGBA,gl.UNSIGNED_BYTE,new Uint8Array([111,111,111,255])),gl.bindTexture(gl.TEXTURE_2D,null),this.bind=function(e){gl.activeTexture(gl.TEXTURE0+e),gl.bindTexture(gl.TEXTURE_2D,t.tex)},this.initTexture=function(e){gl.bindTexture(gl.TEXTURE_2D,t.tex),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,t.image),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.bindTexture(gl.TEXTURE_2D,null)}},CGL.Texture.load=function(t){var e=new CGL.Texture;return e.image=new Image,e.image.onload=function(){console.log(e.image),e.initTexture(e.image)},e.image.src=t,e};var PORT_DIR_IN=0,PORT_DIR_OUT=1,OP_PORT_TYPE_VALUE=0,OP_PORT_TYPE_FUNCTION=1,OP_PORT_TYPE_TEXTURE=2,Ops={},Op=function(){this.objName="",this.portsOut=[],this.portsIn=[],this.posts=[],this.uiAttribs={},this.name="unknown",this.id=generateUUID(),this.getName=function(){return this.name},this.addOutPort=function(t){return t.direction=PORT_DIR_OUT,t.parent=this,this.portsOut.push(t),t},this.addInPort=function(t){return t.direction=PORT_DIR_IN,t.parent=this,this.portsIn.push(t),t},this.execute=function(){this.exec()},this.printInfo=function(){for(var t=0;t<this.portsIn.length;t++)console.log("in: "+this.portsIn[t].getName());for(var e in this.portsOut)console.log("out: "+this.portsOut[e].getName())},this.removeLinks=function(){for(var t=0;t<this.portsIn.length;t++)this.portsIn[t].removeLinks();for(var e in this.portsOut)this.portsOut[e].removeLinks()},this.getPort=function(t){for(var e in this.portsIn)if(this.portsIn[e].getName()==t)return this.portsIn[e];for(var r in this.portsOut)if(this.portsOut[r].getName()==t)return this.portsOut[r]},this.findFittingPort=function(t){for(var e in this.portsOut)if(console.log("."),Link.canLink(t,this.portsOut[e]))return this.portsOut[e];for(var r in this.portsIn)if(console.log("."),Link.canLink(t,this.portsIn[r]))return this.portsIn[r]},this.getSerialized=function(){var t={};t.name=this.getName(),t.objName=this.objName,t.id=this.id,t.uiAttribs=this.uiAttribs,t.portsIn=[],t.portsOut=[];for(var e=0;e<this.portsIn.length;e++)t.portsIn.push(this.portsIn[e].getSerialized());for(var r in this.portsOut)t.portsOut.push(this.portsOut[r].getSerialized());return t},this.getPortByName=function(t){for(var e=0;e<this.portsIn.length;e++)if(this.portsIn[e].name==t)return this.portsIn[e];for(var r in this.portsOut)if(this.portsOut[r].name==t)return this.portsOut[r]}},Port=function(t,e,r){var i=this;this.direction=PORT_DIR_IN,this.id=generateUUID(),this.parent=t,this.links=[],this.value=null,this.name=e,this.type=r||OP_PORT_TYPE_VALUE;var n=null;this.__defineGetter__("val",function(){return this.value}),this.__defineSetter__("val",function(t){this.setValue(t)}),this.onValueChanged=function(){},this.onTriggered=function(){},this.setValue=function(t){if(t!=this.value){this.value=t,this.onValueChanged();for(var e in this.links)this.links[e].setValue()}},this.getName=function(){return this.name},this.addLink=function(t){n=i.value,this.links.push(t)},this.isLinkedTo=function(t){for(var e in this.links)if(this.links[e].portIn==t||this.links[e].portOut==t)return!0;return!1},this.call=function(){for(var t in this.links)this.links[t].portIn!=this&&this.links[t].portIn.onTriggered(),this.links[t].portOut!=this&&this.links[t].portOut.onTriggered()},this.execute=function(){console.log("### execute port: "+this.getName(),this.goals.length)},this.getTypeString=function(){return this.type==OP_PORT_TYPE_VALUE?"value":this.type==OP_PORT_TYPE_FUNCTION?"function":this.type==OP_PORT_TYPE_TEXTURE?"texture":void 0},this.getSerialized=function(){var t={};if(t.name=this.getName(),t.value=this.value,this.direction==PORT_DIR_IN&&this.links.length>0){t.links=[];for(var e in this.links)t.links.push(this.links[e].getSerialized())}return t},this.removeLinks=function(){for(;this.links.length>0;)this.links[0].remove()},this.removeLink=function(t){for(var e in this.links)this.links[e]==t&&this.links.splice(e,1);i.setValue(n)}},Link=function(t){this.portIn=null,this.portOut=null,this.scene=t,this.setValue=function(){this.portIn.val!=this.portOut.val&&(this.portIn.val=this.portOut.val)},this.remove=function(){this.portIn.removeLink(this),this.portOut.removeLink(this),this.scene.onUnLink(this.portIn,this.portOut),this.portIn=null,this.portOut=null,this.scene=null},this.link=function(t,e){return Link.canLink(t,e)?(t.direction==PORT_DIR_IN?(this.portIn=t,this.portOut=e):(this.portIn=e,this.portOut=t),t.addLink(this),e.addLink(this),void this.setValue()):(console.log("cannot link ports!"),!1)},this.getSerialized=function(){var t={};return t.portIn=this.portIn.getName(),t.portOut=this.portOut.getName(),t.objIn=this.portIn.parent.id,t.objOut=this.portOut.parent.id,t}};Link.canLinkText=function(t,e){return t?e?t.direction==PORT_DIR_IN&&t.links.length>0?"input port already busy":e.direction==PORT_DIR_IN&&e.links.length>0?"input port already busy":t.isLinkedTo(e)?"ports already linked":t.direction==e.direction?"can not link: same direction":t.type!=e.type?"can not link: different type":t.parent==e.parent?"can not link: same op":"can link":"can not link: port 2 invalid":"can not link: port 1 invalid"},Link.canLink=function(t,e){return t&&e?t.direction==PORT_DIR_IN&&t.links.length>0?!1:e.direction==PORT_DIR_IN&&e.links.length>0?!1:t.isLinkedTo(e)?!1:t.direction==e.direction?!1:t.type!=e.type?!1:t.parent==e.parent?!1:!0:!1};var Scene=function(){var self=this;this.ops=[],this.timer=new Timer,this.animFrameOps=[],this.clear=function(){for(this.timer=new Timer;this.ops.length>0;)this.deleteOp(this.ops[0].id)},this.addOp=function(objName,uiAttribs){var op=eval("new "+objName+"();");return op.objName=objName,op.uiAttribs=uiAttribs,op.hasOwnProperty("onAnimFrame")&&this.animFrameOps.push(op),this.ops.push(op),this.onAdd&&this.onAdd(op),op},this.deleteOp=function(t){for(var e in this.ops)this.ops[e].id==t&&(this.ops[e].removeLinks(),this.onDelete(this.ops[e]),this.ops.splice(e,1))},this.exec=function(){requestAnimationFrame(self.exec),self.timer.update();var t=self.timer.getTime();for(var e in self.animFrameOps)self.animFrameOps[e].onAnimFrame(t)},this.link=function(t,e,r,i){var n=t.getPort(e),s=r.getPort(i);if(Link.canLink(n,s)){var a=new Link(this);return a.link(n,s),this.onLink(n,s),a}console.log(Link.canLinkText(n,s))},this.onAdd=function(t){},this.onDelete=function(t){},this.onLink=function(t,e){},this.onUnLink=function(t,e){},this.serialize=function(){var t={};t.ops=[];for(var e in this.ops)t.ops.push(this.ops[e].getSerialized());return JSON.stringify(t)},this.getOpById=function(t){for(var e in this.ops)if(this.ops[e].id==t)return this.ops[e]},this.deSerialize=function(t){function e(t,e,i,n){var s=!1;s||r.link(r.getOpById(t),i,r.getOpById(e),n)}"string"==typeof t&&(t=JSON.parse(t));var r=this;for(var i in t.ops){var n=this.addOp(t.ops[i].objName,t.ops[i].uiAttribs);n.id=t.ops[i].id;for(var s in t.ops[i].portsIn){var a=n.getPortByName(t.ops[i].portsIn[s].name);a&&a.type!=OP_PORT_TYPE_TEXTURE&&(a.val=t.ops[i].portsIn[s].value)}for(var o in t.ops[i].portsOut){var h=n.getPortByName(t.ops[i].portsOut[o].name);h&&h.type!=OP_PORT_TYPE_TEXTURE&&(h.val=t.ops[i].portsOut[o].value)}}for(i in t.ops)for(var l in t.ops[i].portsIn)for(var u in t.ops[i].portsIn[l].links)e(t.ops[i].portsIn[l].links[u].objIn,t.ops[i].portsIn[l].links[u].objOut,t.ops[i].portsIn[l].links[u].portIn,t.ops[i].portsIn[l].links[u].portOut);for(var d in this.ops)this.ops[d].id=generateUUID()},this.exec()};String.prototype.endl=function(){return this+"\n"},Ops.Gl={};var GL=null,GL=null,currentShader=null,mvMatrix=mat4.create(),pMatrix=mat4.create();Ops.Gl.Renderer=function(){Op.apply(this,arguments);var t=this,e=new CGL.Shader;this.name="WebGL Renderer",this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION));var r=vec3.create();vec3.set(r,0,0,-2),this.onAnimFrame=function(i){currentShader=e,gl.enable(gl.DEPTH_TEST),GL.clearColor(0,0,0,1),GL.clear(GL.COLOR_BUFFER_BIT|GL.DEPTH_BUFFER_BIT),gl.viewport(0,0,t.canvas.clientWidth,t.canvas.clientHeight),mat4.perspective(pMatrix,45,t.canvas.clientWidth/t.canvas.clientHeight,.01,1100),mat4.identity(mvMatrix),mat4.translate(mvMatrix,mvMatrix,r),GL.enable(GL.BLEND),GL.blendFunc(GL.SRC_ALPHA,GL.ONE_MINUS_SRC_ALPHA),t.trigger.call()},this.canvas=document.getElementById("glcanvas"),GL=this.canvas.getContext("experimental-webgl"),gl=this.canvas.getContext("experimental-webgl")},Ops.Gl.Renderer.prototype=new Op,Ops.Gl.ClearColor=function(){Op.apply(this,arguments);var t=this;this.name="ClearColor",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.r=this.addInPort(new Port(this,"r")),this.g=this.addInPort(new Port(this,"g")),this.b=this.addInPort(new Port(this,"b")),this.render.onTriggered=function(){GL.clearColor(t.r.val,t.g.val,t.b.val,1),GL.clear(GL.COLOR_BUFFER_BIT|GL.DEPTH_BUFFER_BIT),t.trigger.call()}},Ops.Gl.ClearColor.prototype=new Op,Ops.Gl.ClearDepth=function(){Op.apply(this,arguments);var t=this;this.name="ClearDepth",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.render.onTriggered=function(){GL.clear(GL.DEPTH_BUFFER_BIT),t.trigger.call()}},Ops.Gl.ClearDepth.prototype=new Op,Ops.Gl.Texture=function(){Op.apply(this,arguments);var t=this;this.name="texture",this.filename=this.addInPort(new Port(this,"file",OP_PORT_TYPE_VALUE)),this.textureOut=this.addOutPort(new Port(this,"texture",OP_PORT_TYPE_TEXTURE)),this.filename.onValueChanged=function(){console.log("load texture..."),t.tex=CGL.Texture.load(t.filename.val),t.textureOut.val=t.tex.tex},this.filename.val="assets/skull.png"},Ops.Gl.Texture.prototype=new Op,Ops.Gl.Meshes={},Ops.Gl.Meshes.Rectangle=function(){Op.apply(this,arguments);var t=this;this.name="rectangle",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.render.onTriggered=function(){t.mesh.render(currentShader),t.trigger.call()};var e=new CGL.Geometry;e.vertices=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],e.texCoords=[1,1,0,1,1,0,0,0],e.verticesIndices=[0,1,2,3,1,2],this.mesh=new CGL.Mesh(e)},Ops.Gl.Meshes.Rectangle.prototype=new Op,Ops.Gl.Meshes.ObjMesh=function(){Op.apply(this,arguments);var t=this;this.name="OBJ Mesh",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.mesh=null,this.render.onTriggered=function(){t.mesh&&t.mesh.render(currentShader),t.trigger.call()},ajaxRequest("assets/skull.obj",function(e){console.log(e);var r=parseOBJ(e);unwrap=function(t,e,r){for(var i=new Array(Math.floor(t.length/3)*r),n=0;n<t.length;n++)for(var s=0;r>s;s++)i[n*r+s]=e[t[n]*r+s];return i};var i=r.verticesIndices.length;r.vertices=unwrap(r.verticesIndices,r.vertices,3),r.texCoords=unwrap(r.texCoordsIndices,r.texCoords,2),r.verticesIndices=[];for(var n=0;i>n;n++)r.verticesIndices.push(n);t.mesh=new CGL.Mesh(r)})},Ops.Gl.Meshes.ObjMesh.prototype=new Op,Ops.Gl.Meshes.Cube=function(){Op.apply(this,arguments);var t=this;this.name="Cube",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.mesh=null,this.render.onTriggered=function(){null!==t.mesh&&t.mesh.render(currentShader),t.trigger.call()};var e=new CGL.Geometry;e.vertices=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],e.texCoords=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1],e.verticesIndices=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],this.mesh=new CGL.Mesh(e)},Ops.Gl.Meshes.Cube.prototype=new Op,Ops.Gl.Meshes.Plotter=function(){function t(){gl.lineWidth(4),gl.bindBuffer(gl.ARRAY_BUFFER,e.buffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(e.vertices),gl.STATIC_DRAW),e.buffer.itemSize=3,e.buffer.numItems=r}Op.apply(this,arguments);var e=this;this.name="Plotter",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.v=this.addInPort(new Port(this,"value")),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.render.onTriggered=function(){gl.vertexAttribPointer(currentShader.getAttrVertexPos(),e.buffer.itemSize,gl.FLOAT,!1,0,0),currentShader.bind(),gl.bindBuffer(gl.ARRAY_BUFFER,e.buffer),gl.drawArrays(gl.LINE_STRIP,0,e.buffer.numItems),e.trigger.call()},this.buffer=gl.createBuffer();var r=50;this.vertices=[];for(var i=0;r>i;i++)this.vertices.push(1/r*i),this.vertices.push(Math.random()-.5),this.vertices.push(0);t(),this.v.onValueChanged=function(){e.vertices.splice(0,3),e.vertices.push(1),e.vertices.push(e.v.val),e.vertices.push(0);for(var i=0;3*r>i;i+=3)e.vertices[i]=1/r*i;t()}},Ops.Gl.Meshes.Plotter.prototype=new Op,Ops.Gl.Meshes.Triangle=function(){Op.apply(this,arguments);var t=this;this.name="Triangle",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.render.onTriggered=function(){t.mesh.render(currentShader),t.trigger.call()};var e=new CGL.Geometry;e.vertices=[0,1,0,-1,-1,0,1,-1,0],e.verticesIndices=[0,1,2],this.mesh=new CGL.Mesh(e)},Ops.Gl.Meshes.Triangle.prototype=new Op,Ops.Gl.Shader={},Ops.Gl.Shader.BasicMaterial=function(){Op.apply(this,arguments);var t=this;this.name="BasicMaterial",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.doRender=function(){var e=currentShader;currentShader=r,t.texture.val&&(gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,t.texture.val)),t.trigger.call(),currentShader=e};var e="precision highp float;\n#ifdef HAS_TEXTURES\n  varying vec2 texCoord;\n  uniform sampler2D tex;\n#endif\nuniform float r;\nuniform float g;\nuniform float b;\nuniform float a;\n\nvoid main()\n{\nvec4 col=vec4(r,g,b,a);\n#ifdef HAS_TEXTURES\n   col=texture2D(tex,texCoord);\n#endif\ngl_FragColor = col;\n}\n",r=new CGL.Shader;r.setSource(r.getDefaultVertexShader(),e),this.r=this.addInPort(new Port(this,"r")),this.r.onValueChanged=function(){t.r.uniform?t.r.uniform.setValue(t.r.val):t.r.uniform=new CGL.Uniform(r,"f","r",t.r.val)},this.g=this.addInPort(new Port(this,"g")),this.g.onValueChanged=function(){t.g.uniform?t.g.uniform.setValue(t.g.val):t.g.uniform=new CGL.Uniform(r,"f","g",t.g.val)},this.b=this.addInPort(new Port(this,"b")),this.b.onValueChanged=function(){t.b.uniform?t.b.uniform.setValue(t.b.val):t.b.uniform=new CGL.Uniform(r,"f","b",t.b.val)},this.a=this.addInPort(new Port(this,"a")),this.a.onValueChanged=function(){t.a.uniform?t.a.uniform.setValue(t.a.val):t.a.uniform=new CGL.Uniform(r,"f","a",t.a.val)},this.r.val=Math.random(),this.g.val=Math.random(),this.b.val=Math.random(),this.a.val=1,this.render.onTriggered=this.doRender,this.texture=this.addInPort(new Port(this,"texture",OP_PORT_TYPE_TEXTURE)),this.texture.onValueChanged=function(){t.texture.val?(console.log("TEXTURE ADDED"),t.textureUniform=new CGL.Uniform(r,"t","tex",0)):r.removeUniform("tex")},this.doRender()},Ops.Gl.Shader.BasicMaterial.prototype=new Op,Ops.Gl.Shader.Schwurbel=function(){Op.apply(this,arguments);var t=this;this.name="Schwurbel",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.timer=this.addInPort(new Port(this,"time")),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.doRender=function(){currentShader=r,t.timer.uniLoc||(r.bind(),t.timer.uniLoc=gl.getUniformLocation(r.getProgram(),"time")),gl.uniform1f(t.timer.uniLoc,t.timer.val),t.trigger.call()};var e="precision mediump float;\nuniform float time;\n\nvoid main()\n{\nfloat c=sqrt(sin(time*0.02)*cos((time+gl_FragCoord.y)*0.02)+sin(time+gl_FragCoord.x*0.02)*sin(time+gl_FragCoord.y*0.02));\ngl_FragColor = vec4( c,c,c,1.0);\n}\n",r=new CGL.Shader;r.compile(r.getDefaultVertexShader(),e),this.doRender(),this.render.onTriggered=this.doRender},Ops.Gl.Shader.Schwurbel.prototype=new Op,Ops.Gl.Shader.Noise=function(){Op.apply(this,arguments);var t=this;this.name="Noise",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION));var e=-1,r=-1;this.doRender=function(){-1==e&&(r=Date.now(),n.bind(),e=gl.getUniformLocation(n.getProgram(),"time")),gl.uniform1f(e,(Date.now()-r)/1e3),currentShader=n,t.trigger.call()};var i="precision mediump float;\nuniform float time;\n\nfloat random(vec2 co)\n{\n   return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\nvoid main()\n{\n   float c=random(time*gl_FragCoord.xy);   gl_FragColor = vec4( c,c,c,1.0);\n}\n",n=new CGL.Shader;n.compile(n.getDefaultVertexShader(),i),this.doRender(),this.render.onTriggered=this.doRender},Ops.Gl.Shader.Noise.prototype=new Op,Ops.Gl.Matrix={},Ops.Gl.Matrix.Translate=function(){Op.apply(this,arguments);var t=this;this.name="translate",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.x=this.addInPort(new Port(this,"x")),this.y=this.addInPort(new Port(this,"y")),this.z=this.addInPort(new Port(this,"z")),this.x.val=0,this.y.val=0,this.z.val=0;var e=vec3.create();this.render.onTriggered=function(){vec3.set(e,t.x.val,t.y.val,t.z.val),mat4.translate(mvMatrix,mvMatrix,e),t.trigger.call()}},Ops.Gl.Matrix.Translate.prototype=new Op,Ops.Gl.Matrix.Scale=function(){Op.apply(this,arguments);var t=this;this.name="scale",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.scale=this.addInPort(new Port(this,"scale"));var e=vec3.create(),r=mat4.create(),i=mat4.create();mat4.identity(i);var n=!1;this.render.onTriggered=function(){mat4.copy(r,mvMatrix),mat4.multiply(mvMatrix,mvMatrix,i),t.trigger.call(),mat4.copy(mvMatrix,r)};var s=function(){mat4.identity(i),mat4.scale(i,i,e)};this.scaleChanged=function(){n=!1,vec3.set(e,t.scale.val,t.scale.val,t.scale.val),s()},this.scale.onValueChanged=this.scaleChanged,this.scale.val=1,s()},Ops.Gl.Matrix.Scale.prototype=new Op,Ops.Gl.Matrix.Transform=function(){Op.apply(this,arguments);var t=this,e=3.14159/180;this.name="transform",this.render=this.addInPort(new Port(this,"render",OP_PORT_TYPE_FUNCTION)),this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.posX=this.addInPort(new Port(this,"posX")),this.posY=this.addInPort(new Port(this,"posY")),this.posZ=this.addInPort(new Port(this,"posZ")),this.scaleX=this.addInPort(new Port(this,"scaleX")),this.scaleY=this.addInPort(new Port(this,"scaleY")),this.scaleZ=this.addInPort(new Port(this,"scaleZ")),this.rotX=this.addInPort(new Port(this,"rotX")),this.rotY=this.addInPort(new Port(this,"rotY")),this.rotZ=this.addInPort(new Port(this,"rotZ"));var r=vec3.create(),i=vec3.create(),n=mat4.create(),s=mat4.create();mat4.identity(s);var a=!1,o=!1;this.render.onTriggered=function(){mat4.copy(n,mvMatrix),mat4.multiply(mvMatrix,mvMatrix,s),t.trigger.call(),mat4.copy(mvMatrix,n)};var h=function(){mat4.identity(s),o&&mat4.translate(s,s,r),0!==t.rotX.val&&mat4.rotateX(s,s,t.rotX.val*e),0!==t.rotY.val&&mat4.rotateY(s,s,t.rotY.val*e),0!==t.rotZ.val&&mat4.rotateZ(s,s,t.rotZ.val*e),a&&mat4.scale(s,s,i)};this.translateChanged=function(){o=!1,(0!==t.posX.val||0!==t.posY.val||0!==t.posZ.val)&&(o=!0),vec3.set(r,t.posX.val,t.posY.val,t.posZ.val),h()},this.scaleChanged=function(){a=!1,(0!==t.scaleX.val||0!==t.scaleY.val||0!==t.scaleZ.val)&&(a=!0),vec3.set(i,t.scaleX.val,t.scaleY.val,t.scaleZ.val),h()},this.rotChanged=function(){h()},this.rotX.onValueChanged=this.rotChanged,this.rotY.onValueChanged=this.rotChanged,this.rotZ.onValueChanged=this.rotChanged,this.scaleX.onValueChanged=this.scaleChanged,this.scaleY.onValueChanged=this.scaleChanged,this.scaleZ.onValueChanged=this.scaleChanged,this.posX.onValueChanged=this.translateChanged,this.posY.onValueChanged=this.translateChanged,this.posZ.onValueChanged=this.translateChanged,this.rotX.val=0,this.rotY.val=0,this.rotZ.val=0,this.scaleX.val=1,this.scaleY.val=1,this.scaleZ.val=1,this.posX.val=0,this.posY.val=0,this.posZ.val=0,h()},Ops.Gl.Matrix.Transform.prototype=new Op,Ops.Log=function(){Op.apply(this,arguments);var t=this;this.name="logger",this.exe=this.addInPort(new Port(this,"exe",OP_PORT_TYPE_FUNCTION)),this.input=this.addInPort(new Port(this,"input")),this.input.val="",this.exec=function(){console.log("[log] "+t.input.val)},this.exe.onTriggered=this.exec,this.input.onValueChanged=this.exec},Ops.Log.prototype=new Op,Ops.CallsPerSecond=function(){Op.apply(this,arguments);var t=this;this.name="CallsPerSecond",this.exe=this.addInPort(new Port(this,"exe",OP_PORT_TYPE_FUNCTION)),this.timeStart=0,this.cps=0,this.exe.onTriggered=function(){0===t.timeStart&&(t.timeStart=Date.now());var e=Date.now();e-t.timeStart>1e3&&(t.timeStart=Date.now(),console.log("cps: "+t.cps),t.cps=0),t.cps++}},Ops.CallsPerSecond.prototype=new Op,Ops.Value=function(){Op.apply(this,arguments);var t=this;this.name="Value",this.v=this.addInPort(new Port(this,"value")),this.result=this.addOutPort(new Port(this,"result")),this.exec=function(){t.result.val=t.v.val},this.v.onValueChanged=this.exec},Ops.Value.prototype=new Op,Ops.TimeLineTime=function(){Op.apply(this,arguments);this.name="TimeLineTime",this.theTime=this.addOutPort(new Port(this,"time")),this.onAnimFrame=function(t){this.theTime.val=t}},Ops.TimeLineTime.prototype=new Op,Ops.Repeat=function(){Op.apply(this,arguments);var t=this;this.name="Repeat",this.exe=this.addInPort(new Port(this,"exe",OP_PORT_TYPE_FUNCTION)),this.num=this.addInPort(new Port(this,"num")),this.num.val=5,this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.idx=this.addOutPort(new Port(this,"index")),this.exe.onTriggered=function(){for(var e=0;e<t.num.value;e++)t.idx.val=e,t.trigger.call()}},Ops.Repeat.prototype=new Op,Ops.IfTrueThen=function(){Op.apply(this,arguments);var t=this;this.name="if true then",this.exe=this.addInPort(new Port(this,"exe",OP_PORT_TYPE_FUNCTION)),this.bool=this.addInPort(new Port(this,"boolean")),this.bool.val=!1,this.triggerThen=this.addOutPort(new Port(this,"then",OP_PORT_TYPE_FUNCTION)),this.triggerElse=this.addOutPort(new Port(this,"else",OP_PORT_TYPE_FUNCTION)),this.exe.onTriggered=function(){t.bool.val===!0?t.triggerThen.call():t.triggerElse.call()},this.bool.onValueChanged=function(){t.exe.onTriggered()}},Ops.IfTrueThen.prototype=new Op,Ops.Group=function(){Op.apply(this,arguments);var t=this;this.name="group",this.exe=this.addInPort(new Port(this,"exe",OP_PORT_TYPE_FUNCTION)),this.triggers=[];for(var e=0;10>e;e++)this.triggers.push(this.addOutPort(new Port(this,"trigger "+e,OP_PORT_TYPE_FUNCTION)));this.exe.onTriggered=function(){for(var e in t.triggers)t.triggers[e].call()}},Ops.Group.prototype=new Op,Ops.Interval=function(){Op.apply(this,arguments),this.name="Interval",this.timeOutId=-1,this.interval=this.addInPort(new Port(this,"interval")),this.interval.val=1e3,this.trigger=this.addOutPort(new Port(this,"trigger",OP_PORT_TYPE_FUNCTION)),this.exec=function(){if(-1==this.timeOutId){var t=this;this.timeOutId=setTimeout(function(){t.timeOutId=-1,t.trigger.call(),t.exec()},this.interval.val)}},this.exec()},Ops.Interval.prototype=new Op,Ops.Anim={},Ops.Anim.SinusAnim=function(){Op.apply(this,arguments),this.name="SinusAnim",this.exe=this.addInPort(new Port(this,"exe",OP_PORT_TYPE_FUNCTION)),this.result=this.addOutPort(new Port(this,"result"));var t=this;this.exe.onTriggered=function(){t.result.val=Math.sin(Date.now()/1e3)},this.exe.onTriggered()},Ops.Anim.SinusAnim.prototype=new Op,Ops.Anim.RelativeTime=function(){Op.apply(this,arguments),this.name="RelativeTime",this.exe=this.addInPort(new Port(this,"exe",OP_PORT_TYPE_FUNCTION)),this.result=this.addOutPort(new Port(this,"result"));var t=this,e=Date.now()/1e3;this.exe.onTriggered=function(){t.result.val=Date.now()/1e3-e},this.exe.onTriggered()},Ops.Anim.RelativeTime.prototype=new Op,Ops.Input={},Ops.Input.GamePad=function(){Op.apply(this,arguments),this.name="GamePad",this.exe=this.addInPort(new Port(this,"exe",OP_PORT_TYPE_FUNCTION)),this.numPads=this.addOutPort(new Port(this,"numPads")),this.axis1=this.addOutPort(new Port(this,"axis1")),this.axis2=this.addOutPort(new Port(this,"axis2")),this.axis3=this.addOutPort(new Port(this,"axis3")),this.axis4=this.addOutPort(new Port(this,"axis4")),this.button0=this.addOutPort(new Port(this,"button0")),this.button1=this.addOutPort(new Port(this,"button1")),this.button2=this.addOutPort(new Port(this,"button2")),this.button3=this.addOutPort(new Port(this,"button3")),
this.button4=this.addOutPort(new Port(this,"button4"));{var t=this;Date.now()/1e3}this.exe.onTriggered=function(){var e=navigator.getGamepads(),r=0;for(var i in e)e[i].axes&&(t.axis1.val=e[i].axes[0],t.axis2.val=e[i].axes[1],t.axis3.val=e[i].axes[2],t.axis4.val=e[i].axes[3],t.button0.val=e[i].buttons[0].pressed,t.button0.val=e[i].buttons[1].pressed,t.button2.val=e[i].buttons[2].pressed,t.button3.val=e[i].buttons[3].pressed,t.button4.val=e[i].buttons[4].pressed,r++);t.numPads.val=r},this.exe.onTriggered()},Ops.Input.GamePad.prototype=new Op,Ops.Math={},Ops.Math.Random=function(){var t=this;Op.apply(this,arguments),this.name="random",this.exe=this.addInPort(new Port(this,"exe",OP_PORT_TYPE_FUNCTION)),this.result=this.addOutPort(new Port(this,"result")),this.exe.onTriggered=function(){t.result.val=Math.random()},this.exe.onTriggered()},Ops.Math.Random.prototype=new Op,Ops.Math.MapRange=function(){Op.apply(this,arguments);var t=this;this.name="map value range",this.result=this.addOutPort(new Port(this,"result")),this.v=this.addInPort(new Port(this,"value")),this.old_min=this.addInPort(new Port(this,"old min")),this.old_max=this.addInPort(new Port(this,"old max")),this.new_min=this.addInPort(new Port(this,"new min")),this.new_max=this.addInPort(new Port(this,"new max")),this.exec=function(){if(t.v.val>t.old_max.val)return void(t.result.val=t.new_max.val);if(t.v.val<t.old_min.val)return void(t.result.val=t.new_min.val);var e=parseFloat(t.new_min.val),r=parseFloat(t.new_max.val),i=parseFloat(t.old_min.val),n=parseFloat(t.old_max.val),s=parseFloat(t.v.val),a=!1,o=Math.min(i,n),h=Math.max(i,n);o!=i&&(a=!0);var l=!1,u=Math.min(e,r),d=Math.max(e,r);u!=e&&(l=!0);var p=0;p=a?(h-s)*(d-u)/(h-o):(s-o)*(d-u)/(h-o),t.result.val=l?d-p:p+u},this.v.val=0,this.old_min.val=-1,this.old_max.val=1,this.new_min.val=0,this.new_max.val=1,this.v.onValueChanged=this.exec,this.old_min.onValueChanged=this.exec,this.old_max.onValueChanged=this.exec,this.new_min.onValueChanged=this.exec,this.new_max.onValueChanged=this.exec,this.exec()},Ops.Math.MapRange.prototype=new Op,Ops.Math.Abs=function(){Op.apply(this,arguments);var t=this;this.name="abs",this.number=this.addInPort(new Port(this,"number")),this.result=this.addOutPort(new Port(this,"result")),this.number.onValueChanged=function(){t.result.val=Math.abs(t.number.val)}},Ops.Math.Abs.prototype=new Op,Ops.Math.Sin=function(){Op.apply(this,arguments);var t=this;this.name="Sinus",this.number=this.addInPort(new Port(this,"number")),this.result=this.addOutPort(new Port(this,"result")),this.number.onValueChanged=function(){t.result.val=Math.sin(t.number.val)}},Ops.Math.Sin.prototype=new Op,Ops.Math.Sum=function(){Op.apply(this,arguments);var t=this;this.name="sum",this.result=this.addOutPort(new Port(this,"result")),this.number1=this.addInPort(new Port(this,"number1")),this.number2=this.addInPort(new Port(this,"number2")),this.exec=function(){t.result.val=parseFloat(t.number1.val)+parseFloat(t.number2.val)},this.number1.onValueChanged=this.exec,this.number2.onValueChanged=this.exec},Ops.Math.Sum.prototype=new Op,Ops.Math.Multiply=function(){Op.apply(this,arguments);var t=this;this.name="multiply",this.result=this.addOutPort(new Port(this,"result")),this.number1=this.addInPort(new Port(this,"number1")),this.number2=this.addInPort(new Port(this,"number2")),this.exec=function(){t.result.val=t.number1.val*t.number2.val},this.number1.onValueChanged=this.exec,this.number2.onValueChanged=this.exec},Ops.Math.Multiply.prototype=new Op,Ops.Math.Divide=function(){Op.apply(this,arguments);var t=this;this.name="Divide",this.result=this.addOutPort(new Port(this,"result")),this.number1=this.addInPort(new Port(this,"number1")),this.number2=this.addInPort(new Port(this,"number2")),this.exec=function(){t.result.val=t.number1.val/t.number2.val},this.number1.onValueChanged=this.exec,this.number2.onValueChanged=this.exec},Ops.Math.Divide.prototype=new Op,Ops.Math.Compare={},Ops.Math.Compare.IsEven=function(){Op.apply(this,arguments);var t=this;this.name="isEven",this.result=this.addOutPort(new Port(this,"result")),this.number1=this.addInPort(new Port(this,"number1")),this.exec=function(){t.result.val=!(1&t.number1.val)},this.number1.onValueChanged=this.exec},Ops.Math.Compare.IsEven.prototype=new Op,Ops.Math.Compare.Greater=function(){Op.apply(this,arguments);var t=this;this.name="Greater",this.result=this.addOutPort(new Port(this,"result")),this.number1=this.addInPort(new Port(this,"number1")),this.number2=this.addInPort(new Port(this,"number2")),this.exec=function(){t.result.val=t.number1.val>t.number2.val},this.number1.onValueChanged=this.exec,this.number2.onValueChanged=this.exec},Ops.Math.Compare.Greater.prototype=new Op,Ops.Math.Compare.Between=function(){Op.apply(this,arguments);var t=this;this.name="Between",this.result=this.addOutPort(new Port(this,"result")),this.number=this.addInPort(new Port(this,"value")),this.number1=this.addInPort(new Port(this,"number1")),this.number2=this.addInPort(new Port(this,"number2")),this.number.val=2,this.number1.val=1,this.number2.val=3,this.exec=function(){t.result.val=t.number.val>Math.min(t.number1.val,t.number2.val)&&t.number.val<Math.max(t.number1.val,t.number2.val)},this.number1.onValueChanged=this.exec,this.number2.onValueChanged=this.exec,this.number.onValueChanged=this.exec},Ops.Math.Compare.Between.prototype=new Op,Ops.Math.Compare.Lesser=function(){Op.apply(this,arguments);var t=this;this.name="Lesser",this.result=this.addOutPort(new Port(this,"result")),this.number1=this.addInPort(new Port(this,"number1")),this.number2=this.addInPort(new Port(this,"number2")),this.exec=function(){t.result.val=t.number1.val<t.number2.val},this.number1.onValueChanged=this.exec,this.number2.onValueChanged=this.exec},Ops.Math.Compare.Lesser.prototype=new Op,Ops.Math.Compare.Equals=function(){Op.apply(this,arguments);var t=this;this.name="Equals",this.result=this.addOutPort(new Port(this,"result")),this.number1=this.addInPort(new Port(this,"number1")),this.number2=this.addInPort(new Port(this,"number2")),this.exec=function(){t.result.val=t.number1.val==t.number2.val},this.number1.onValueChanged=this.exec,this.number2.onValueChanged=this.exec},Ops.Math.Compare.Equals.prototype=new Op;
//# sourceMappingURL=cables.min.js.map