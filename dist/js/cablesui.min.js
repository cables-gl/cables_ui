function getPortColor(e){return e==OP_PORT_TYPE_VALUE?"#ea6638":e==OP_PORT_TYPE_FUNCTION?"#6c9fde":e==OP_PORT_TYPE_TEXTURE?"#26a92a":"#c6c6c6"}function setStatusText(e){$("#statusbar").html("&nbsp;"+e)}function Line(e,t,a){var n={x:e,y:t};this.updateEnd=function(e,t){r.x=e,r.y=t,this.redraw()};var r={x:e,y:t};this.getPath=function(){var e=n.x,t=n.y,a=r.x,o=r.y;return"M "+e+" "+t+" L"+a+" "+o},this.thisLine=a.path(this.getPath()),this.thisLine.attr({stroke:uiConfig.colorLink,"stroke-width":1}),this.redraw=function(){this.thisLine.attr("path",this.getPath())}}function UiLink(e,t){var a=this;this.p1=e,this.p2=t;var n=30,o=30,s=null;this.hideAddButton=function(){s&&s.remove(),s=null},this.showAddButton=function(){s?s.attr({cx:n,cy:o}):(s=r.circle(n,o,.74*uiConfig.portSize).attr({fill:getPortColor(a.p1.thePort.getType()),"stroke-width":0,"fill-opacity":1}),s.click(function(e){ui.showOpSelect(event.offsetX,event.offsetY,null,null,a)}))},this.getPath=function(){if(!t.attrs)return"";if(!e.attrs)return"";var a=e.matrix.e+e.attrs.x+uiConfig.portSize/2,r=e.matrix.f+e.attrs.y,s=t.matrix.e+t.attrs.x+uiConfig.portSize/2,l=t.matrix.f+t.attrs.y;n=.5*(a+s),o=.5*(r+l);var i=0,u=0,d=0,b=0;u=Math.min(r,l)+(Math.max(r,l)-Math.min(r,l))/2,b=Math.min(r,l)+(Math.max(r,l)-Math.min(r,l))/2,l>r&&(r+=uiConfig.portSize),r>l&&(l+=uiConfig.portSize),i=Math.min(a,s)+(Math.max(a,s)-Math.min(a,s))/4,d=Math.min(a,s)+(Math.max(a,s)-Math.min(a,s))/4;Math.min(a,s)+Math.abs(s-a);return i=a-0,d=s+0,"M "+a+" "+r+" C "+i+" "+u+" "+d+" "+b+" "+s+" "+l},this.thisLine=r.path(this.getPath()),this.thisLine.attr({stroke:getPortColor(e.thePort.type),"stroke-width":2}),this.thisLine.hover(function(){this.attr({stroke:uiConfig.colorLinkHover})},function(){this.attr({stroke:getPortColor(a.p1.thePort.type)})}),this.remove=function(){this.thisLine.remove()},this.redraw=function(){this.thisLine.attr("path",this.getPath()),this.showAddButton()}}function getPortDescription(e){return e.getName()+" ("+e.val+") ["+e.getTypeString()+"]"}var examples=[{title:"triangledance",src:{ops:[{name:"WebGL Renderer",objName:"Ops.Gl.Renderer",id:"dc8530c7-bfa9-4317-b662-46772e38760a",uiAttribs:{translate:{x:273,y:18}},portsIn:[],portsOut:[{name:"trigger",value:null}]},{name:"Repeat",objName:"Ops.Repeat",id:"b24ec028-772c-4e50-beda-a14e91c929c4",uiAttribs:{translate:{x:108,y:129}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"b24ec028-772c-4e50-beda-a14e91c929c4",objOut:"9baac4cd-674d-4898-a5cc-d9e5aa0ea713"}]},{name:"num",value:"11"}],portsOut:[{name:"trigger",value:null},{name:"index",value:10}]},{name:"Triangle",objName:"Ops.Gl.Meshes.Triangle",id:"fe8467c7-13d7-4e28-b1e9-9f2862d805e4",uiAttribs:{translate:{x:235,y:548}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"fe8467c7-13d7-4e28-b1e9-9f2862d805e4",objOut:"22c9b15c-5009-4b38-a355-0f751e982a09"}]}],portsOut:[{name:"trigger",value:null}]},{name:"transform",objName:"Ops.Gl.Matrix.Transform",id:"db87cec7-a912-4dab-8912-75f9f33a3d1f",uiAttribs:{translate:{x:95,y:339}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"db87cec7-a912-4dab-8912-75f9f33a3d1f",objOut:"7462c8ff-3721-4209-b92d-b454893b228e"}]},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:"0.4"},{name:"scaleX",value:1},{name:"scaleY",value:1},{name:"scaleZ",value:1},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",value:null}]},{name:"transform",objName:"Ops.Gl.Matrix.Transform",id:"9baac4cd-674d-4898-a5cc-d9e5aa0ea713",uiAttribs:{translate:{x:99,y:81}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"9baac4cd-674d-4898-a5cc-d9e5aa0ea713",objOut:"dc8530c7-bfa9-4317-b662-46772e38760a"}]},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:-1},{name:"scaleX",value:1},{name:"scaleY",value:1},{name:"scaleZ",value:1},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",value:null}]},{name:"transform",objName:"Ops.Gl.Matrix.Transform",id:"22c9b15c-5009-4b38-a355-0f751e982a09",uiAttribs:{translate:{x:235,y:464}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"22c9b15c-5009-4b38-a355-0f751e982a09",objOut:"db87cec7-a912-4dab-8912-75f9f33a3d1f"}]},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:.01,links:[{portIn:"posZ",portOut:"result",objIn:"22c9b15c-5009-4b38-a355-0f751e982a09",objOut:"57b8504d-147f-46e3-b23a-5775bb15d60a"}]},{name:"scaleX",value:1},{name:"scaleY",value:1},{name:"scaleZ",value:1},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:214.46063406834557,links:[{portIn:"rotZ",portOut:"result",objIn:"22c9b15c-5009-4b38-a355-0f751e982a09",objOut:"eceeb4e0-2a9d-451d-bd09-5f222458f52b"}]}],portsOut:[{name:"trigger",value:null}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"eceeb4e0-2a9d-451d-bd09-5f222458f52b",uiAttribs:{translate:{x:463,y:213}},portsIn:[{name:"number1",value:10,links:[{portIn:"number1",portOut:"index",objIn:"eceeb4e0-2a9d-451d-bd09-5f222458f52b",objOut:"b24ec028-772c-4e50-beda-a14e91c929c4"}]},{name:"number2",value:21.446063406834558,links:[{portIn:"number2",portOut:"result",objIn:"eceeb4e0-2a9d-451d-bd09-5f222458f52b",objOut:"85450dc7-10e3-4873-8504-025009dc57e4"}]}],portsOut:[{name:"result",value:214.46063406834557}]},{name:"SinusAnim",objName:"Ops.Anim.SinusAnim",id:"1f148627-3e14-4533-afc9-5440a4d95e22",uiAttribs:{translate:{x:458,y:69}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"1f148627-3e14-4533-afc9-5440a4d95e22",objOut:"dc8530c7-bfa9-4317-b662-46772e38760a"}]}],portsOut:[{name:"result",value:.9748210639470253}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"85450dc7-10e3-4873-8504-025009dc57e4",uiAttribs:{translate:{x:461,y:125}},portsIn:[{name:"number1",value:"22"},{name:"number2",value:.9748210639470253,links:[{portIn:"number2",portOut:"result",objIn:"85450dc7-10e3-4873-8504-025009dc57e4",objOut:"1f148627-3e14-4533-afc9-5440a4d95e22"}]}],portsOut:[{name:"result",value:21.446063406834558}]},{name:"BasicMaterial",objName:"Ops.Gl.Shader.BasicMaterial",id:"7462c8ff-3721-4209-b92d-b454893b228e",uiAttribs:{translate:{x:106,y:259}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"7462c8ff-3721-4209-b92d-b454893b228e",objOut:"b24ec028-772c-4e50-beda-a14e91c929c4"}]},{name:"r",value:1,links:[{portIn:"r",portOut:"result",objIn:"7462c8ff-3721-4209-b92d-b454893b228e",objOut:"ba70490d-37d4-454d-bdcc-9113dba386a7"}]},{name:"g",value:.38978386297822},{name:"b",value:.7915484751574695},{name:"a",value:"0.6"},{name:"texture",value:null}],portsOut:[{name:"trigger",value:null}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"ba70490d-37d4-454d-bdcc-9113dba386a7",uiAttribs:{translate:{x:177,y:198}},portsIn:[{name:"number1",value:10,links:[{portIn:"number1",portOut:"index",objIn:"ba70490d-37d4-454d-bdcc-9113dba386a7",objOut:"b24ec028-772c-4e50-beda-a14e91c929c4"}]},{name:"number2",value:"0.1"}],portsOut:[{name:"result",value:1}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"57b8504d-147f-46e3-b23a-5775bb15d60a",uiAttribs:{translate:{x:245,y:369}},portsIn:[{name:"number1",value:10,links:[{portIn:"number1",portOut:"index",objIn:"57b8504d-147f-46e3-b23a-5775bb15d60a",objOut:"b24ec028-772c-4e50-beda-a14e91c929c4"}]},{name:"number2",value:"0.001"}],portsOut:[{name:"result",value:.01}]}]}},{title:"if...then",src:{ops:[{name:"if true then",objName:"Ops.IfTrueThen",id:"266b503d-3e68-4d49-b30d-9770e711ec88",uiAttribs:{translate:{x:249,y:307}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"266b503d-3e68-4d49-b30d-9770e711ec88",objOut:"1dbf78f5-91dd-4528-9e2f-a51f2f8cc9fb"}]},{name:"boolean",value:!1,links:[{portIn:"boolean",portOut:"result",objIn:"266b503d-3e68-4d49-b30d-9770e711ec88",objOut:"e586181b-445c-410e-ae7a-351f487cc523"}]}],portsOut:[{name:"then",value:null},{name:"else",value:null}]},{name:"WebGL Renderer",objName:"Ops.Gl.Renderer",id:"3a29f1af-b1ec-4234-a2d9-93983ba6ed54",uiAttribs:{translate:{x:236,y:57}},portsIn:[],portsOut:[{name:"trigger",value:null}]},{name:"Greater",objName:"Ops.Math.Compare.Greater",id:"e586181b-445c-410e-ae7a-351f487cc523",uiAttribs:{translate:{x:369,y:216}},portsIn:[{name:"number1",value:-.986112747258538,links:[{portIn:"number1",portOut:"result",objIn:"e586181b-445c-410e-ae7a-351f487cc523",objOut:"d6c0bf3f-1855-4cbc-83cb-48b592a8ace2"}]},{name:"number2",value:"0"}],portsOut:[{name:"result",value:!1}]},{name:"Triangle",objName:"Ops.Gl.Meshes.Triangle",id:"58d9665e-5fbd-4c39-826d-355b7969cb01",uiAttribs:{translate:{x:118,y:446}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"then",objIn:"58d9665e-5fbd-4c39-826d-355b7969cb01",objOut:"266b503d-3e68-4d49-b30d-9770e711ec88"}]}],portsOut:[{name:"trigger",value:null}]},{name:"rectangle",objName:"Ops.Gl.Meshes.Rectangle",id:"fe1f5d12-e817-44ba-b961-b6e966c07648",uiAttribs:{translate:{x:263,y:444}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"else",objIn:"fe1f5d12-e817-44ba-b961-b6e966c07648",objOut:"266b503d-3e68-4d49-b30d-9770e711ec88"}]}],portsOut:[{name:"trigger",value:null}]},{name:"SinusAnim",objName:"Ops.Anim.SinusAnim",id:"d6c0bf3f-1855-4cbc-83cb-48b592a8ace2",uiAttribs:{translate:{x:360,y:131}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"d6c0bf3f-1855-4cbc-83cb-48b592a8ace2",objOut:"3a29f1af-b1ec-4234-a2d9-93983ba6ed54"}]}],portsOut:[{name:"result",value:-.986112747258538}]},{name:"ClearColor",objName:"Ops.Gl.ClearColor",id:"1dbf78f5-91dd-4528-9e2f-a51f2f8cc9fb",uiAttribs:{translate:{x:167,y:186}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"1dbf78f5-91dd-4528-9e2f-a51f2f8cc9fb",objOut:"3a29f1af-b1ec-4234-a2d9-93983ba6ed54"}]},{name:"r",value:null},{name:"g",value:null},{name:"b",value:-.986112747258538,links:[{portIn:"b",portOut:"result",objIn:"1dbf78f5-91dd-4528-9e2f-a51f2f8cc9fb",objOut:"d6c0bf3f-1855-4cbc-83cb-48b592a8ace2"}]}],portsOut:[{name:"trigger",value:null}]}]}},{title:"plotter",src:{ops:[{name:"WebGL Renderer",objName:"Ops.Gl.Renderer",id:"140e6c67-c2fe-4cfc-bd60-29f9059a77ae",uiAttribs:{translate:{x:128,y:72}},portsIn:[],portsOut:[{name:"trigger",value:null}]},{name:"transform",objName:"Ops.Gl.Matrix.Transform",id:"7a616490-a053-4b67-a436-83b477d75a0d",uiAttribs:{translate:{x:128,y:298}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"7a616490-a053-4b67-a436-83b477d75a0d",objOut:"140e6c67-c2fe-4cfc-bd60-29f9059a77ae"}]},{name:"posX",value:"-1.0"},{name:"posY",value:0},{name:"posZ",value:0},{name:"scaleX",value:1},{name:"scaleY",value:1},{name:"scaleZ",value:1},{name:"rotX",value:0},{name:"rotY",value:"33"},{name:"rotZ",value:0}],portsOut:[{name:"trigger",value:null}]},{name:"Sinus",objName:"Ops.Math.Sin",id:"c1facdcb-cc17-453f-a34a-f9fd09700a4d",uiAttribs:{translate:{x:351,y:354}},portsIn:[{name:"number",value:543.4359998703003,links:[{portIn:"number",portOut:"result",objIn:"c1facdcb-cc17-453f-a34a-f9fd09700a4d",objOut:"74e9fdb1-5aa3-4386-905f-b3a247140b33"}]}],portsOut:[{name:"result",value:.05949404776965134}]},{name:"RelativeTime",objName:"Ops.Anim.RelativeTime",id:"cc7b9ebd-f1aa-4009-a7c9-a03c1141d7a6",uiAttribs:{translate:{x:350,y:228}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"cc7b9ebd-f1aa-4009-a7c9-a03c1141d7a6",objOut:"140e6c67-c2fe-4cfc-bd60-29f9059a77ae"}]}],portsOut:[{name:"result",value:135.85899996757507}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"74e9fdb1-5aa3-4386-905f-b3a247140b33",uiAttribs:{translate:{x:350,y:289}},portsIn:[{name:"number1",value:135.85899996757507,links:[{portIn:"number1",portOut:"result",objIn:"74e9fdb1-5aa3-4386-905f-b3a247140b33",objOut:"cc7b9ebd-f1aa-4009-a7c9-a03c1141d7a6"}]},{name:"number2",value:"4"}],portsOut:[{name:"result",value:543.4359998703003}]},{name:"Plotter",objName:"Ops.Gl.Meshes.Plotter",id:"4f31f2e8-1117-412f-9e5d-a0fea3ad24ee",uiAttribs:{translate:{x:128,y:537}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"4f31f2e8-1117-412f-9e5d-a0fea3ad24ee",objOut:"7a616490-a053-4b67-a436-83b477d75a0d"}]},{name:"value",value:.05949404776965134,links:[{portIn:"value",portOut:"result",objIn:"4f31f2e8-1117-412f-9e5d-a0fea3ad24ee",objOut:"c1facdcb-cc17-453f-a34a-f9fd09700a4d"}]}],portsOut:[{name:"trigger",value:null}]}]}},{title:"plotter noise",src:{ops:[{name:"WebGL Renderer",objName:"Ops.Gl.Renderer",id:"8aa77a43-1510-463b-8bf6-8c0e08fffc0f",uiAttribs:{translate:{x:128,y:72}},portsIn:[],portsOut:[{name:"trigger",value:null}]},{name:"transform",objName:"Ops.Gl.Matrix.Transform",id:"a29d9ec1-9eea-4154-83e9-650ccfac45c4",uiAttribs:{translate:{x:128,y:298}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"a29d9ec1-9eea-4154-83e9-650ccfac45c4",objOut:"8aa77a43-1510-463b-8bf6-8c0e08fffc0f"}]},{name:"posX",value:"-1.0"},{name:"posY",value:0},{name:"posZ",value:0},{name:"scaleX",value:1},{name:"scaleY",value:1},{name:"scaleZ",value:1},{name:"rotX",value:0},{name:"rotY",value:"33"},{name:"rotZ",value:0}],portsOut:[{name:"trigger",value:null}]},{name:"Sinus",objName:"Ops.Math.Sin",id:"139a17c8-6f6a-4154-bf64-e81671b7d507",uiAttribs:{translate:{x:351,y:354}},portsIn:[{name:"number",value:1250.5350005626678,links:[{portIn:"number",portOut:"result",objIn:"139a17c8-6f6a-4154-bf64-e81671b7d507",objOut:"b1e8ade3-7b4b-4354-aa25-0f3412e6021e"}]}],portsOut:[{name:"result",value:.1801357272446712}]},{name:"RelativeTime",objName:"Ops.Anim.RelativeTime",id:"4eef7e36-db76-4ebb-af07-fa242c4c5457",uiAttribs:{translate:{x:350,y:228}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"4eef7e36-db76-4ebb-af07-fa242c4c5457",objOut:"8aa77a43-1510-463b-8bf6-8c0e08fffc0f"}]}],portsOut:[{name:"result",value:250.10700011253357}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"b1e8ade3-7b4b-4354-aa25-0f3412e6021e",uiAttribs:{translate:{x:350,y:289}},portsIn:[{name:"number1",value:250.10700011253357,links:[{portIn:"number1",portOut:"result",objIn:"b1e8ade3-7b4b-4354-aa25-0f3412e6021e",objOut:"4eef7e36-db76-4ebb-af07-fa242c4c5457"}]},{name:"number2",value:"5"}],portsOut:[{name:"result",value:1250.5350005626678}]},{name:"Plotter",objName:"Ops.Gl.Meshes.Plotter",id:"1b444f62-0aa0-427b-8af4-5f7fcaacc175",uiAttribs:{translate:{x:128,y:537}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"1b444f62-0aa0-427b-8af4-5f7fcaacc175",objOut:"a29d9ec1-9eea-4154-83e9-650ccfac45c4"}]},{name:"value",value:.2936247485124131,links:[{portIn:"value",portOut:"result",objIn:"1b444f62-0aa0-427b-8af4-5f7fcaacc175",objOut:"dd45504a-bb59-4d4c-b6d7-d27d9a271398"}]}],portsOut:[{name:"trigger",value:null}]},{name:"random",objName:"Ops.Math.Random",id:"791ee797-0f23-4cf1-b06e-1b37e369a81d",uiAttribs:{translate:{x:539,y:262}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"791ee797-0f23-4cf1-b06e-1b37e369a81d",objOut:"8aa77a43-1510-463b-8bf6-8c0e08fffc0f"}]}],portsOut:[{name:"result",value:.5674451063387096}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"9d6f5fea-1b77-4ac3-96a7-85bfaa532a9b",uiAttribs:{translate:{x:530,y:343}},portsIn:[{name:"number1",value:"0.2"},{name:"number2",value:.5674451063387096,links:[{portIn:"number2",portOut:"result",objIn:"9d6f5fea-1b77-4ac3-96a7-85bfaa532a9b",objOut:"791ee797-0f23-4cf1-b06e-1b37e369a81d"}]}],portsOut:[{name:"result",value:.11348902126774192}]},{name:"sum",objName:"Ops.Math.Sum",id:"dd45504a-bb59-4d4c-b6d7-d27d9a271398",uiAttribs:{translate:{x:340,y:471}},portsIn:[{name:"number1",value:.1801357272446712,links:[{portIn:"number1",portOut:"result",objIn:"dd45504a-bb59-4d4c-b6d7-d27d9a271398",objOut:"139a17c8-6f6a-4154-bf64-e81671b7d507"}]},{name:"number2",value:.11348902126774192,links:[{portIn:"number2",portOut:"result",objIn:"dd45504a-bb59-4d4c-b6d7-d27d9a271398",objOut:"9d6f5fea-1b77-4ac3-96a7-85bfaa532a9b"}]}],portsOut:[{name:"result",value:.2936247485124131}]}]}},{title:"obj mesh",src:{ops:[{name:"WebGL Renderer",objName:"Ops.Gl.Renderer",id:"abd9d026-8735-4791-a589-99a79792783c",uiAttribs:{translate:{x:159,y:29}},portsIn:[],portsOut:[{name:"trigger",value:null}]},{name:"OBJ Mesh",objName:"Ops.Gl.Meshes.ObjMesh",id:"1f98711a-4dc3-4e33-9968-b4fb9cc1ee6a",uiAttribs:{translate:{x:172,y:382}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"1f98711a-4dc3-4e33-9968-b4fb9cc1ee6a",objOut:"b8e66c7b-7eb4-49cb-be13-8406f8853b16"}]}],portsOut:[{name:"trigger",value:null}]},{name:"transform",objName:"Ops.Gl.Matrix.Transform",id:"b8e66c7b-7eb4-49cb-be13-8406f8853b16",uiAttribs:{translate:{x:150,y:271}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"b8e66c7b-7eb4-49cb-be13-8406f8853b16",objOut:"1a4ba91e-fd04-44b1-a253-544adfb583a0"}]},{name:"posX",value:0},{name:"posY",value:"-20"},{name:"posZ",value:"-223"},{name:"scaleX",value:1},{name:"scaleY",value:1},{name:"scaleZ",value:1},{name:"rotX",value:0},{name:"rotY",value:958.4000110626221,links:[{portIn:"rotY",portOut:"result",objIn:"b8e66c7b-7eb4-49cb-be13-8406f8853b16",objOut:"65a083b1-9eb6-41d4-bdcc-3cd0642a7a3b"}]},{name:"rotZ",value:0}],portsOut:[{name:"trigger",value:null}]},{name:"RelativeTime",objName:"Ops.Anim.RelativeTime",id:"3b3644ad-93c9-41db-9945-32b622e62a43",uiAttribs:{translate:{x:379,y:96}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"3b3644ad-93c9-41db-9945-32b622e62a43",objOut:"abd9d026-8735-4791-a589-99a79792783c"}]}],portsOut:[{name:"result",value:19.16800022125244}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"65a083b1-9eb6-41d4-bdcc-3cd0642a7a3b",uiAttribs:{translate:{x:318,y:211}},portsIn:[{name:"number1",value:19.16800022125244,links:[{portIn:"number1",portOut:"result",objIn:"65a083b1-9eb6-41d4-bdcc-3cd0642a7a3b",objOut:"3b3644ad-93c9-41db-9945-32b622e62a43"}]},{name:"number2",value:"50"}],portsOut:[{name:"result",value:958.4000110626221}]},{name:"BasicMaterial",objName:"Ops.Gl.Shader.BasicMaterial",id:"1a4ba91e-fd04-44b1-a253-544adfb583a0",uiAttribs:{translate:{x:110,y:187}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"1a4ba91e-fd04-44b1-a253-544adfb583a0",objOut:"abd9d026-8735-4791-a589-99a79792783c"}]},{name:"r",value:.470756561961025},{name:"g",value:.8225311778951436},{name:"b",value:"1"},{name:"a",value:1},{name:"texture",value:{},links:[{portIn:"texture",portOut:"texture",objIn:"1a4ba91e-fd04-44b1-a253-544adfb583a0",objOut:"699bc89d-d1e3-4a5e-bd16-63673c1d58f0"}]}],portsOut:[{name:"trigger",value:null}]},{name:"texture",objName:"Ops.Gl.Texture",id:"699bc89d-d1e3-4a5e-bd16-63673c1d58f0",uiAttribs:{translate:{x:211,y:83}},portsIn:[{name:"file",value:"assets/skull.png"}],portsOut:[{name:"texture",value:{}}]}]}},{title:"stupid cubes",src:{ops:[{name:"WebGL Renderer",objName:"Ops.Gl.Renderer",id:"b55a747a-a227-41be-a6c4-da221051cd1e",uiAttribs:{translate:{x:317,y:47}},portsIn:[],portsOut:[{name:"trigger",value:null}]},{name:"transform",objName:"Ops.Gl.Matrix.Transform",id:"84bc0678-2c99-4585-a412-e0faf59dc80b",uiAttribs:{translate:{x:408,y:248}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"84bc0678-2c99-4585-a412-e0faf59dc80b",objOut:"50dff18f-831e-4e88-a287-212195903195"}]},{name:"posX",value:"0.20000000000000004"},{name:"posY",value:0},{name:"posZ",value:0},{name:"scaleX",value:1},{name:"scaleY",value:1},{name:"scaleZ",value:1},{name:"rotX",value:0},{name:"rotY",value:2708.508001804352,links:[{portIn:"rotY",portOut:"result",objIn:"84bc0678-2c99-4585-a412-e0faf59dc80b",objOut:"7e824d25-ef5a-4c8f-94b6-9ebf3500ff30"}]},{name:"rotZ",value:0}],portsOut:[{name:"trigger",value:null}]},{name:"BasicMaterial",objName:"Ops.Gl.Shader.BasicMaterial",id:"a560e405-fc3a-47e6-954a-2e6aa2f1cd17",uiAttribs:{translate:{x:421,y:311}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"a560e405-fc3a-47e6-954a-2e6aa2f1cd17",objOut:"84bc0678-2c99-4585-a412-e0faf59dc80b"}]},{name:"r",value:"1.6000000000000005"},{name:"g",value:"0.30000000000000016"},{name:"b",value:"0.30000000000000016"},{name:"a",value:1},{name:"texture",value:null}],portsOut:[{name:"trigger",value:null}]},{name:"Cube",objName:"Ops.Gl.Meshes.Cube",id:"ecda7a66-b473-4e45-8506-6f74e7604be1",uiAttribs:{translate:{x:454,y:632}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"ecda7a66-b473-4e45-8506-6f74e7604be1",objOut:"9549291e-f660-48b8-9ffa-997eebec2000"}]}],portsOut:[{name:"trigger",value:null}]},{name:"transform",objName:"Ops.Gl.Matrix.Transform",id:"8881d03b-635f-4e3b-8f8d-d1434e6dc0da",uiAttribs:{translate:{x:424,y:472}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"8881d03b-635f-4e3b-8f8d-d1434e6dc0da",objOut:"2ea32b54-6a85-4a66-9cac-dccd1ef8af05"}]},{name:"posX",value:.9769739636664628,links:[{portIn:"posX",portOut:"result",objIn:"8881d03b-635f-4e3b-8f8d-d1434e6dc0da",objOut:"c7646e57-4485-4c2f-bbf6-dabb6123d6aa"}]},{name:"posY",value:0},{name:"posZ",value:"0.4"},{name:"scaleX",value:"0.10000000000000014"},{name:"scaleY",value:"0.10000000000000014"},{name:"scaleZ",value:"0.10000000000000014"},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:2708.508001804352,links:[{portIn:"rotZ",portOut:"result",objIn:"8881d03b-635f-4e3b-8f8d-d1434e6dc0da",objOut:"7e824d25-ef5a-4c8f-94b6-9ebf3500ff30"}]}],portsOut:[{name:"trigger",value:null}]},{name:"random cluster",objName:"Ops.RandomCluster",id:"2ea32b54-6a85-4a66-9cac-dccd1ef8af05",uiAttribs:{translate:{x:431,y:371}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"2ea32b54-6a85-4a66-9cac-dccd1ef8af05",objOut:"a560e405-fc3a-47e6-954a-2e6aa2f1cd17"}]},{name:"num",value:"111"},{name:"size",value:"2"}],portsOut:[{name:"trigger",value:null},{name:"index",value:110},{name:"rnd",value:.9261729470454156}]},{name:"RelativeTime",objName:"Ops.Anim.RelativeTime",id:"7c421ed4-1a58-41b4-8828-863bd476440e",uiAttribs:{translate:{x:471,y:97}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"7c421ed4-1a58-41b4-8828-863bd476440e",objOut:"b55a747a-a227-41be-a6c4-da221051cd1e"}]}],portsOut:[{name:"result",value:123.11400008201599}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"7e824d25-ef5a-4c8f-94b6-9ebf3500ff30",uiAttribs:{translate:{x:549,y:185}},portsIn:[{name:"number1",value:123.11400008201599,links:[{portIn:"number1",portOut:"result",objIn:"7e824d25-ef5a-4c8f-94b6-9ebf3500ff30",objOut:"7c421ed4-1a58-41b4-8828-863bd476440e"}]},{name:"number2",value:"22"}],portsOut:[{name:"result",value:2708.508001804352}]},{name:"BasicMaterial",objName:"Ops.Gl.Shader.BasicMaterial",id:"9549291e-f660-48b8-9ffa-997eebec2000",uiAttribs:{translate:{x:447,y:550}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"9549291e-f660-48b8-9ffa-997eebec2000",objOut:"8881d03b-635f-4e3b-8f8d-d1434e6dc0da"}]},{name:"r",value:"0.5"},{name:"g",value:.9261729470454156,links:[{portIn:"g",portOut:"rnd",objIn:"9549291e-f660-48b8-9ffa-997eebec2000",objOut:"2ea32b54-6a85-4a66-9cac-dccd1ef8af05"}]},{name:"b",value:"1"},{name:"a",value:"0.9"},{name:"texture",value:null}],portsOut:[{name:"trigger",value:null}]},{name:"ClearColor",objName:"Ops.Gl.ClearColor",id:"50dff18f-831e-4e88-a287-212195903195",uiAttribs:{translate:{x:310,y:162}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"50dff18f-831e-4e88-a287-212195903195",objOut:"b55a747a-a227-41be-a6c4-da221051cd1e"}]},{name:"r",value:"0.2"},{name:"g",value:"0.23"},{name:"b",value:"0.4"}],portsOut:[{name:"trigger",value:null}]},{name:"SinusAnim",objName:"Ops.Anim.SinusAnim",id:"c7646e57-4485-4c2f-bbf6-dabb6123d6aa",uiAttribs:{translate:{x:-37,y:164}},portsIn:[{name:"exe",value:null,links:[{portIn:"exe",portOut:"trigger",objIn:"c7646e57-4485-4c2f-bbf6-dabb6123d6aa",objOut:"50dff18f-831e-4e88-a287-212195903195"}]}],portsOut:[{name:"result",value:.9769739636664628}]}]}},{title:"leap motion",src:{ops:[{name:"LeapMotion",objName:"Ops.Gl.LeapMotion",id:"17dfd585-27ac-465c-bbad-cde0208a1ff4",uiAttribs:{translate:{x:393,y:36}},portsIn:[],portsOut:[{name:"translationX",value:145.222},{name:"translationY",value:-77.296},{name:"translationZ",value:21.3614},{name:"finger0X",value:173.484},{name:"finger0Y",value:154.246},{name:"finger0Z",value:8.58886}]},{name:"WebGL Renderer",objName:"Ops.Gl.Renderer",id:"0606fda7-e8ed-499b-8a22-d1fe8a3c11bc",uiAttribs:{translate:{x:134,y:171}},portsIn:[],portsOut:[{name:"trigger",value:null}]},{name:"transform",objName:"Ops.Gl.Matrix.Transform",id:"55877a4c-5674-4e5d-ac99-0832df3c2524",uiAttribs:{translate:{x:132,y:360}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"55877a4c-5674-4e5d-ac99-0832df3c2524",objOut:"0606fda7-e8ed-499b-8a22-d1fe8a3c11bc"}]},{name:"posX",value:1.45222,links:[{portIn:"posX",portOut:"result",objIn:"55877a4c-5674-4e5d-ac99-0832df3c2524",objOut:"704da168-46a4-4e52-8749-ffa0c3ccdcd4"}]},{name:"posY",value:-.7729600000000001,links:[{portIn:"posY",portOut:"result",objIn:"55877a4c-5674-4e5d-ac99-0832df3c2524",objOut:"1e278ed8-dfe5-400d-90e5-dff84d4cfde5"}]},{name:"posZ",value:.213614,links:[{portIn:"posZ",portOut:"result",objIn:"55877a4c-5674-4e5d-ac99-0832df3c2524",objOut:"a24e340b-f6d1-4f3d-a972-2bfeda86c888"}]},{name:"scaleX",value:"0.30000000000000016"},{name:"scaleY",value:"0.30000000000000016"},{name:"scaleZ",value:"0.20000000000000015"},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",value:null}]},{name:"Cube",objName:"Ops.Gl.Meshes.Cube",id:"6ab051f7-24b4-4948-81a9-95fd93accbe7",uiAttribs:{translate:{x:132,y:438}},portsIn:[{name:"render",value:null,links:[{portIn:"render",portOut:"trigger",objIn:"6ab051f7-24b4-4948-81a9-95fd93accbe7",objOut:"55877a4c-5674-4e5d-ac99-0832df3c2524"}]}],portsOut:[{name:"trigger",value:null}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"1e278ed8-dfe5-400d-90e5-dff84d4cfde5",uiAttribs:{translate:{x:346,y:165}},portsIn:[{name:"number1",value:-77.296,links:[{portIn:"number1",portOut:"translationY",objIn:"1e278ed8-dfe5-400d-90e5-dff84d4cfde5",objOut:"17dfd585-27ac-465c-bbad-cde0208a1ff4"}]},{name:"number2",value:"0.01"}],portsOut:[{name:"result",value:-.7729600000000001}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"704da168-46a4-4e52-8749-ffa0c3ccdcd4",uiAttribs:{translate:{x:316,y:121}},portsIn:[{name:"number1",value:145.222,links:[{portIn:"number1",portOut:"translationX",objIn:"704da168-46a4-4e52-8749-ffa0c3ccdcd4",objOut:"17dfd585-27ac-465c-bbad-cde0208a1ff4"}]},{name:"number2",value:"0.01"}],portsOut:[{name:"result",value:1.45222}]},{name:"multiply",objName:"Ops.Math.Multiply",id:"a24e340b-f6d1-4f3d-a972-2bfeda86c888",uiAttribs:{translate:{x:371,y:206}},portsIn:[{name:"number1",value:21.3614,links:[{portIn:"number1",portOut:"translationZ",objIn:"a24e340b-f6d1-4f3d-a972-2bfeda86c888",objOut:"17dfd585-27ac-465c-bbad-cde0208a1ff4"}]},{name:"number2",value:"0.01"}],portsOut:[{name:"result",value:.213614}]}]}}],CABLES=CABLES||{};document.addEventListener("DOMContentLoaded",function(e){var t=new Scene;ui=new CABLES.Ui,ui.show(t)});var uiConfig={portSize:10,portPadding:2,colorLink:"#fff",colorLinkHover:"#fff",colorLinkInvalid:"#f00",colorOpBg:"#fff",colorPort:"#6c9fde",colorPortHover:"#f00",watchValuesInterval:100,rendererSizes:[{w:640,h:360},{w:800,h:480},{w:0,h:0}]},r,selectedEndPort=null,links=[],line;Raphael.el.setGroup=function(e){this.group=e},Raphael.el.getGroup=function(){return this.group},Raphael.fn.OpRect=function(e,t,a,n,r){var o=this.rect(e,t,a,n).attr({fill:uiConfig.colorOpBg,stroke:"#000","stroke-width":0}),s=this.text(e+a/2,t+n/2,r),l=this.rect(e,t,a,n).attr({fill:"#ccc","fill-opacity":0,"stroke-opacity":0,cursor:"move"}),i=this.set();return i.push(o,s,l),l.setGroup(i),l};var OpUi=function(e,t,a,n,o){var s=this;this.links=[],this.portsIn=[],this.portsOut=[],this.remove=function(){this.oprect.getGroup().remove(),this.oprect.remove()},this.removeDeadLinks=function(){for(var e in s.links)null===s.links[e].p1&&s.links.splice(e,1)},this.showAddButtons=function(){s.removeDeadLinks();for(var e in s.links)s.links[e].showAddButton()},this.hideAddButtons=function(){s.removeDeadLinks();for(var e in s.links)s.links[e].hideAddButton()};var l=function(){this.group=this.getGroup(),this.previousDx=0,this.previousDy=0},i=function(e,t){var a=e-this.previousDx,n=t-this.previousDy;this.group.translate(a,n),this.previousDx=e,this.previousDy=t,s.op.uiAttribs||(s.op.uiAttribs={}),s.op.uiAttribs.translate={x:s.oprect.matrix.e,y:s.oprect.matrix.f};for(var r in s.links)s.links[r].redraw()},u=function(){};this.oprect=r.OpRect(e,t,a,n,o).drag(i,l,u),this.oprect.node.onmousedown=function(){s.showAddButtons(),ui.setSelectedOp(s),ui.showOpParams(s.op)},this.oprect.node.onclick=function(){};var d=function(e,t,a){line||(this.startx=this.matrix.e+this.attrs.x,this.starty=this.matrix.f+this.attrs.y)},b=function(e,t){if(line?line.updateEnd(this.startx+e,this.starty+t):line=new Line(this.startx+uiConfig.portSize/2,this.starty+uiConfig.portSize/2,r),null===selectedEndPort)setStatusText("select a port to link...");else{var a=Link.canLinkText(selectedEndPort.thePort,this.thePort);setStatusText("can link"==a?getPortDescription(selectedEndPort.thePort):a)}line.thisLine.attr(null!==selectedEndPort&&Link.canLink(selectedEndPort.thePort,this.thePort)?{stroke:uiConfig.colorLink}:{stroke:uiConfig.colorLinkInvalid})},p=function(e){if(3==e.which)return void this.thePort.removeLinks();if(null!==selectedEndPort&&Link.canLink(selectedEndPort.thePort,this.thePort)){var t=(ui.scene.link(selectedEndPort.op,selectedEndPort.thePort.getName(),this.op,this.thePort.getName()),new UiLink(selectedEndPort,this));selectedEndPort.opUi.links.push(t),s.links.push(t)}else ui.showOpSelect(e.offsetX,e.offsetY,this.op,this.thePort);line&&line.thisLine&&line.thisLine.remove(),line=null};this.addPort=function(a){var n=0,o=a;"out"==o&&(n=20);var l=this.portsIn.length;"out"==o&&(l=this.portsOut.length);var i=e+(uiConfig.portSize+uiConfig.portPadding)*l,u=t+n,c=r.rect(i,u,uiConfig.portSize,uiConfig.portSize).attr({fill:uiConfig.colorPort,"stroke-width":0});this.oprect.getGroup().push(c),c.direction=o,c.op=s.op,c.opUi=s,c.portIndex=l;var m;m="out"==o?s.op.portsOut[l]:s.op.portsIn[l],c.thePort=m,c.attr({fill:getPortColor(m.type)}),c.hover(function(){selectedEndPort=this,c.toFront(),c.attr({x:i-.25*uiConfig.portSize,y:u-.25*uiConfig.portSize,width:1.5*uiConfig.portSize,height:1.5*uiConfig.portSize,stroke:"#fff","stroke-width":1});setStatusText(getPortDescription(m))},function(){selectedEndPort=null,c.attr({fill:getPortColor(this.thePort.type),width:uiConfig.portSize,height:uiConfig.portSize,x:i,y:u,"stroke-width":0}),setStatusText("")}),c.drag(b,d,p),$(c.node).bind("contextmenu",function(e){console.log("noyesmaybe"),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!1}),"out"==o?this.portsOut.push(c):this.portsIn.push(c)}};CABLES.Ui=function(){function getHandleBarHtml(e,t){var a=$("#"+e).html(),n=Handlebars.compile(a),r=t;return n(r)}function doWatchPorts(){for(var e in watchPorts){var t=".watchPortValue_"+watchPorts[e].watchId;$(t).html(watchPorts[e].val)}uiConfig.watchValuesInterval>0&&setTimeout(doWatchPorts,uiConfig.watchValuesInterval)}var self=this;this.ops=[],this.scene=null;var rendererSize=0,watchPorts=[],mouseNewOPX=0,mouseNewOPY=0,linkNewOpTo=null,linkNewOpToPort=null,linkNewLink=null,selectedOp=null;$(document).keydown(function(e){switch(e.which){case 46:case 8:selectedOp&&ui.scene.deleteOp(selectedOp.op.id),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();break;case 27:rendererSize==uiConfig.rendererSizes.length-1?self.cycleRendererSize():$("#modalcontent").is(":visible")?ui.closeModal():ui.showOpSelect();

}}),this.setLayout=function(){var e=20,t=30,a=360,n=uiConfig.rendererSizes[rendererSize].w,r=uiConfig.rendererSizes[rendererSize].h;$("svg").css("height",window.innerHeight-e-t),$("svg").css("width",window.innerWidth-n-2),$("svg").css("top",t),$("#options").css("left",window.innerWidth-n),$("#options").css("top",r),$("#options").css("width",a),$("#options").css("height",window.innerHeight-r-e),$("#meta").css("right",0),$("#meta").css("top",r),$("#meta").css("width",n-a),$("#meta").css("height",window.innerHeight-r-e),$("#menubar").css("top",0),$("#menubar").css("width",window.innerWidth-n),$("#menubar").css("height",t),0===uiConfig.rendererSizes[rendererSize].w?($("#glcanvas").attr("width",window.innerWidth),$("#glcanvas").attr("height",window.innerHeight),$("#glcanvas").css("z-index",9999)):($("#glcanvas").attr("width",uiConfig.rendererSizes[rendererSize].w),$("#glcanvas").attr("height",uiConfig.rendererSizes[rendererSize].h))},this.getOpList=function(){function getop(val,parentname){if("[object Object]"===Object.prototype.toString.call(val))for(var propertyName in val)if(val.hasOwnProperty(propertyName)){var html="",opname="Ops."+parentname+propertyName,isOp=!1;"function"==eval("typeof("+opname+")")&&(isFunction=!0);var op={isOp:isOp,name:opname,lowercasename:opname.toLowerCase()};ops.push(op),found=getop(val[propertyName],parentname+propertyName+".")}}var ops=[];return getop(Ops,""),ops},this.setUpRouting=function(){var e=new Simrou;e.addRoute("/").get(function(e,t){(!localStorage.holo||""===localStorage.holo||localStorage.holo.length<20)&&(scene.clear(),ui.showExample(0)),self.scene.deSerialize(localStorage.holo)}),e.addRoute("/example/:index").get(function(e,t){ui.showExample(t.index)}),e.start("/")},this.showOpSelect=function(e,t,a,n,r){linkNewLink=r,linkNewOpToPort=n,linkNewOpToOp=a,mouseNewOPX=e,mouseNewOPY=t;var o=getHandleBarHtml("op_select",{ops:self.getOpList()});self.showModal(o),$("#opsearch").focus(),$("#opsearch").on("input",function(e){var t=$("#opsearch").val();$("#search_style").html(t?'.searchable:not([data-index*="'+t.toLowerCase()+'"]) { display: none; }':".searchable:{display:block;}")})},this.show=function(e){this.scene=e,$("#meta").append(getHandleBarHtml("timeline_controler"),{}),$("#meta").append();var t="<div><h2>Examples</h2>";for(var a in examples)t+='<a href="#/example/'+a+'">'+examples[a].title+"</a><br/>";t+="</div>",$("#meta").append(t),r=Raphael(0,0,640,480);new RaphaelZPD(r,{zoom:!1,pan:!0,drag:!1});this.bindScene(self.scene),window.addEventListener("resize",this.setLayout,!1),this.setLayout(),this.setUpRouting()},this.showExample=function(e){self.scene.clear(),self.scene.deSerialize(examples[e].src)},this.bindScene=function(e){e.onUnLink=function(e,t){for(var a in self.ops){self.ops[a].removeDeadLinks();for(var n in self.ops[a].links)(self.ops[a].links[n].p1.thePort==e&&self.ops[a].links[n].p2.thePort==t||self.ops[a].links[n].p1.thePort==t&&self.ops[a].links[n].p2.thePort==e)&&(self.ops[a].links[n].hideAddButton(),self.ops[a].links[n].p1=null,self.ops[a].links[n].p2=null,self.ops[a].links[n].remove())}},e.onLink=function(e,t){var a=null,n=null;for(var r in self.ops){for(var o in self.ops[r].portsIn)self.ops[r].portsIn[o].thePort==e&&(a=self.ops[r].portsIn[o]),self.ops[r].portsIn[o].thePort==t&&(n=self.ops[r].portsIn[o]);for(var s in self.ops[r].portsOut)self.ops[r].portsOut[s].thePort==e&&(a=self.ops[r].portsOut[s]),self.ops[r].portsOut[s].thePort==t&&(n=self.ops[r].portsOut[s])}var l=new UiLink(a,n);a.opUi.links.push(l),n.opUi.links.push(l)},e.onDelete=function(e){for(var t in self.ops)self.ops[t].op==e&&(self.ops[t].hideAddButtons(),self.ops[t].remove(),self.ops.splice(t,1))},e.onAdd=function(e){var t=new OpUi(mouseNewOPX,mouseNewOPY,100,30,e.name);t.op=e,self.ops.push(t);for(var a in e.portsIn)t.addPort("in");for(var n in e.portsOut)t.addPort("out");if(e.uiAttribs&&e.uiAttribs.hasOwnProperty("translate")&&t.oprect.getGroup().translate(e.uiAttribs.translate.x,e.uiAttribs.translate.y),linkNewLink){var r=linkNewLink.p1.op,o=linkNewLink.p1.thePort,s=linkNewLink.p2.op,l=linkNewLink.p2.thePort;for(var i in o.links)(o.links[i].portIn==o&&o.links[i].portOut==l||o.links[i].portOut==o&&o.links[i].portIn==l)&&o.links[i].remove();var u=e.findFittingPort(o),d=e.findFittingPort(l);ui.scene.link(e,u.getName(),r,o.getName()),ui.scene.link(e,d.getName(),s,l.getName())}else if(linkNewOpToPort){var b=e.findFittingPort(linkNewOpToPort);if(b){ui.scene.link(linkNewOpToOp,linkNewOpToPort.getName(),e,b.getName())}}linkNewOpToOp=null,linkNewLink=null,linkNewOpToPort=null,mouseNewOPX=0,mouseNewOPY=0,ui.showOpParams(e)}},this.setSelectedOp=function(e){selectedOp&&selectedOp.hideAddButtons(),selectedOp=e,selectedOp.showAddButtons()},this.cycleRendererSize=function(){rendererSize++,rendererSize>uiConfig.rendererSizes.length-1&&(rendererSize=0),self.setLayout()},this.closeModal=function(){mouseNewOPX=0,mouseNewOPY=0,$("#modalcontent").html(""),$("#modalcontent").hide(),$("#modalbg").hide()},this.showModal=function(e){$("#modalcontent").html('<div class="modalclose"><a class="button" onclick="ui.closeModal();">close</a></div>'),$("#modalcontent").append(e),$("#modalcontent").show(),$("#modalbg").show()},this.importDialog=function(){var e="";e+="import:<br/><br/>",e+='<textarea id="serialized"></textarea>',e+="<br/>",e+="<br/>",e+='<a class="button" onclick="ui.scene.clear();ui.scene.deSerialize($(\'#serialized\').val());ui.closeModal();">import</a>',self.showModal(e)},this.exportDialog=function(){var e="";e+="export:<br/><br/>",e+='<textarea id="serialized"></textarea>',self.showModal(e),$("#serialized").val(self.scene.serialize())},this.updateOpParams=function(e){self.showOpParams(self.scene.getOpById(e))},this.showOpParams=function(e){watchPorts=[];var t=getHandleBarHtml("params_op_head",{op:e}),a=$("#params_port").html(),n=Handlebars.compile(a);t+=getHandleBarHtml("params_ports_head",{title:"in"});for(var r in e.portsIn)e.portsIn[r].isLinked()&&(e.portsIn[r].watchId="in_"+r,watchPorts.push(e.portsIn[r])),t+=n({port:e.portsIn[r],dirStr:"in",portnum:r,isInput:!0});t+=getHandleBarHtml("params_ports_head",{title:"out"});for(var o in e.portsOut)e.portsOut[o].getType()==OP_PORT_TYPE_VALUE&&(e.portsOut[o].watchId="out_"+o,watchPorts.push(e.portsOut[o])),t+=n({port:e.portsOut[o],dirStr:"out",portnum:o,isInput:!1});t+=getHandleBarHtml("params_op_foot",{op:e}),$("#options").html(t);for(var s in e.portsOut)!function(t){$("#portdelete_out_"+t).on("click",function(a){e.portsOut[t].removeLinks(),self.showOpParams(e)})}(s);for(var l in e.portsIn)!function(t){$("#portdelete_in_"+t).on("click",function(a){e.portsIn[t].removeLinks(),self.showOpParams(e)})}(l);for(var i in e.portsIn)!function(t){$("#portval_"+t).on("input",function(a){e.portsIn[t].val=""+$("#portval_"+t).val()})}(i)},doWatchPorts()};
//# sourceMappingURL=cablesui.min.js.map