<html>
<head>
    <title>cables</title>
    <link rel="stylesheet" type="text/css" href="css/ui.css">
</head>
<body>




    <script type="text/javascript" src="js/libs.min.js"></script>
    <script type="text/javascript" src="js/cables.min.js"></script> 
    <script type="text/javascript" src="js/cablesui.min.js"></script> 

    <canvas id="glcanvas" width="640" height="360"></canvas>
<script id="entry-template" type="text/x-handlebars-template">
  <div class="entry">
    <h1>{{title}}</h1>
    <div class="body">
      {{body}}
    </div>
  </div>
</script>



<div id="statusbar"></div>
<div id="meta"></div>
<div id="options" class="panel"></div>

<div id="menubar">


    

<a onclick="ui.showOpSelect(100,100);" class="button">new op</a>

    <a onclick="localStorage['holo']=ui.scene.serialize();" class="button">save localstorage</a>
    <a onclick="ui.scene.clear();ui.scene.deSerialize(localStorage['holo']);" class="button">load localstorage</a>
    
    <a onclick="ui.exportDialog();" class="button">export</a>
    <a onclick="ui.importDialog();" class="button">import</a>

    <a onclick="ui.scene.clear();" class="button" style="float:right;">clear</a>


    <a onclick="ui.toggleRendererZoom();" class="button">big</a>
</div>

<div id="modalbg"></div>
<div id="modalcontent"></div>



<script id="op_select" type="text/x-handlebars-template">
    
<div class="opsearch">
<h2>selct op</h2>

<input id="opsearch"/>

<br/><br/>
<style id="search_style"></style>


<div style="height:300px;overflow:auto">
  {{#each ops}}

    <div class="searchresult searchable" data-opname="{{ name }}" data-index="{{lowercasename}}">
        <a onclick="ui.scene.addOp('{{name}}');ui.closeModal();" >{{name}}</a>
    </div>


  {{/each}}
</div>

</div>


<script>

$( ".searchresult:first" ).addClass( "selected" );

    var displayBoxIndex=0;
    var Navigate = function(diff) 
    {
        displayBoxIndex += diff;

        if (displayBoxIndex < 0) displayBoxIndex = 0;
        var oBoxCollection = $(".searchresult:visible");
        var oBoxCollectionAll = $(".searchresult");
        if (displayBoxIndex >= oBoxCollection.length) displayBoxIndex = 0;
        if (displayBoxIndex < 0) displayBoxIndex = oBoxCollection.length - 1;

        var cssClass = "selected";
        oBoxCollectionAll.removeClass(cssClass);

        oBoxCollection.removeClass(cssClass).eq(displayBoxIndex).addClass(cssClass);
    }



    function onInput(e)
    {

        // $(".searchresult:visible").first().addClass( "selected" );
        displayBoxIndex=0;
        Navigate(0);
    }

    $('#opsearch').on('input',onInput);

    $('#opsearch').keydown(function(e) 
    {

        switch(e.which) {
            case 13:
            var opname=$('.selected').data('opname');

            console.log('del;!');
            ui.scene.addOp(opname);
            ui.closeModal();

            break;

            case 8:
                onInput();
                return true;
            break;


            case 37: // left
            break;

            case 38: // up
                $('.selected').removeClass('selected');
                Navigate(-1);
            break;

            case 39: // right
            break;

            case 40: // down
                $('.selected').removeClass('selected');
                Navigate(1);
            break;

            default: return; // exit this handler for other keys
        }
        e.preventDefault(); // prevent the default action (scroll / move caret)
    });

</script>



</script>



<script id="params_op_head" type="text/x-handlebars-template">

    <div class="">
        <h2>{{op.name}}</h2>
        [{{op.objName}}]

        <br/>
        <br/>

            <span class="button" onclick="ui.updateOpParams('{{op.id}}')">refresh</span>
        
        <br/>
        <br/>

  
    </div>

<table>

</script>



<script id="params_op_foot" type="text/x-handlebars-template">

</table>

<div>
    <br/>
    <br/>
    <span class="button warn" onclick="if(confirm('delete ?'))ui.scene.deleteOp('{{op.id}}')">delete</span>
    <br/>
    <br/>
</div>

<script>
    $("input").bind("mousewheel", function(event, delta) 
    {
        var val=parseFloat(this.value);
        var add=1;
        if(Math.abs(val)<2) add=0.1;
            else if(Math.abs(val)<100) add=1;
                else add=10;

        if (delta > 0)
        {
            this.value = val + add;
        }
        else
        {
                this.value = val - add;
        }

         $(this).trigger('input');
        return false;
     });
</script>

</script>



<script id="params_ports_head" type="text/x-handlebars-template">
    
<tr>
<th colspan="11">
<div class="panelhead">{{title}}:</div>
</th>
</tr>

</script>

<script id="params_port" type="text/x-handlebars-template">

<tr>
    <td class="port portType_{{ port.type }}">
        {{port.name}}
    </td>

    <td>
        {{#if isInput}}
            {{#if port.links}}
                    <span class="value watchPortValue_{{ port.watchId }}">{{port.val}}</span>
                {{else}}
                    <input class="value" id="portval_{{ portnum }}" value="{{ port.val }}"/>
            {{/if}}
        {{else}}
            <span class="value watchPortValue_{{ port.watchId }}" >{{port.val}}</span>
        {{/if}}
    </td>

    <td>
        {{#if port.links}}
            <a class="button" id="portdelete_{{ dirStr }}_{{ portnum }}" >unlink</a>
            {{port.links.length}}x
        {{/if}}
    </td>
</tr>

</script>



<script id="timeline_controler" type="text/x-handlebars-template">

<div id="timeline">
    <a class="button" onclick="ui.scene.timer.setOffset(-4);">rew</a>

    <a class="button" onclick="ui.scene.timer.togglePlay();">play / pause</a>

    <a class="button" onclick="ui.scene.timer.setOffset(4);">fwd</a>

    <br/><br/>
</div>



</script>


    </body>
</html>
